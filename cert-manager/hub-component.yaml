version: 1
kind: component

requires:
  - helm
  - kubernetes
provides:
  - cert-manager

parameters:
- name: hub.componentName
- name: kubernetes
  parameters: 
  - name: namespace
    value: kube-system
    env: NAMESPACE
  - name: serviceAccount
    empty: allow
  - name: replicas
    value: 1
  - name: cainjector.replicas
    value: 1
  - name: webhook.replicas
    value: 1

- name: certmanager
  parameters:
  - name: version
    value: v1.13.1
    env: CHART_VERSION
  - name: issuer.name
    empty: allow
    
- name: helm
  parameters:
  - name: repo
    value: https://charts.jetstack.io
    env: HELM_REPO
  - name: chart
    env: HELM_CHART
    value: "cert-manager"
  - name: crd
    env: CRD
    value: https://github.com/jetstack/cert-manager/releases/download/${certmanager.version}/cert-manager.crds.yaml

templates:
  kind: go
  files:
  - "*.gotemplate"
