version: 1
kind: component

requires:
  - kubernetes

parameters:
- name: knative
  parameters:
  - name: namespace
    value: knative-serving
  - name: networking.ingressClass
    value: knative-local-gateway.istio-system.svc.cluster.local
- name: kserve
  parameters:
  - name: namespace
    value: kserve
    env: NAMESPACE
  - name: version
    value: v0.10.0
  - name: deploymentMode
    env: DEPLOYMENT_MODE
    brief: | 
      Possible values RawDeployment or Serverless
      See more: https://github.com/kserve/kserve#standalone-installation
    value: RawDeployment
  - name: disableVirtualHost
    value: true
- name: ingress
  empty: allow
  parameters:
  - name: hosts
  - name: class
  - name: protocol
    value: http
- name: bucket
  empty: allow
  parameters:
  - name: endpoint
  - name: region
- name: istio
  empty: allow
  parameters:
  - name: namespace
    value: istio-system
  - name: ingressGateway

- name: kustomize.resources
  env: HUB_KUSTOMIZE_RESOURCES
  value: >-
    https://github.com/kserve/kserve/releases/download/${kserve.version}/kserve.yaml
    https://github.com/kserve/kserve/releases/download/${kserve.version}/kserve-runtimes.yaml

templates:
  files:
  - '*.template'
  - 'rawdeployment/*.template'
  - 'serverless/*.template'
  