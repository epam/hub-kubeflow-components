kind: component
version: 1

requires:
  - aws
  - terraform

parameters:
  - name: bucket
    parameters:
    - name: name
      env: TF_VAR_name
    - name: acl
      value: "private"
      env: TF_VAR_acl
    - name: region
      value: ${cloud.region}
      env: TF_VAR_bucket_region

  - name: cloud
    parameters:
    - name: region
      value: "eu-central-1"
      fromEnv: AWS_REGION
    - name: profile
      value: "default"
      fromEnv: AWS_PROFILE

outputs:
  - name: bucket.kind
    value: s3
  - name: bucket.region
    fromTfVar: s3_bucket_region
  - name: bucket.name
  - name: bucket.endpoint
    fromTfVar: s3_bucket_endpoint