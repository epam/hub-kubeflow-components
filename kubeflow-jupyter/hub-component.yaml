version: 1
kind: component

requires:
  - kubernetes

parameters:
  - name: kubernetes.namespace
    env: NAMESPACE
    value: kubeflow

  - name: kubeflow.version
    value: v1.6.1

  - name: kustomize.tarball
    parameters:
    - name: url
      value: "https://codeload.github.com/kubeflow/manifests/tar.gz/${kubeflow.version}"
      env: HUB_KUSTOMIZE_TARBALL_URL
    - name: subpath
      value: >-
        apps/jupyter/jupyter-web-app/upstream:jupyter-web-app/upstream
        apps/jupyter/notebook-controller/upstream:notebook-controller/upstream
      env: HUB_KUSTOMIZE_TARBALL_SUBPATH
    - name: dir
      value: "."
      env: HUB_KUSTOMIZE_TARBALL_DIR

  - name: storage.class
    brief: |
      Configuration for storage class for the notebooks
      see: https://github.com/kubeflow/manifests/blob/v1.5.1/apps/jupyter/jupyter-web-app/upstream/base/configs/spawner_ui_config.yaml#L84

templates:
  files:
    - "*.template"
    - "jupyter-web-app/*.template"
    - "jupyter-web-app/configs/*.template"
    - "notebook-controller/*.template"
